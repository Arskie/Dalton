SELECT 
	P.PAWNTICKET, P.LOANDATE, P.MATUDATE, P.EXPIRYDATE , 
    C.FIRSTNAME || ' ' || C.LASTNAME AS CLIENT,
	C.ADDR_STREET || ' ' || C.ADDR_CITY || ' ' || C.ADDR_CITY || ' ' || C.ADDR_ZIP as FULLADDRESS,
    CASE 
    	WHEN P.ITEMTYPE = 'JWL' AND (P.DESCRIPTION = Null OR P.DESCRIPTION = '') THEN 
        	CLASS.CATEGORY || ' ' || ROUND(P.GRAMS,2) || 'G ' || P.KARAT || 'K'
        ELSE P.DESCRIPTION
    END AS Description, 
    P.ORNUM, P.ORDATE, P.OLDTICKET, P.NETAMOUNT, P.RENEWDUE, P.REDEEMDUE, P.APPRAISAL, P.PRINCIPAL, 
    P.INTEREST, P.ADVINT, P.SERVICECHARGE, P.ITEMTYPE, CLASS.CATEGORY, P.GRAMS, P.KARAT,
    CASE P.STATUS
	    WHEN '0' THEN 'RENEWED'
        WHEN 'R' THEN 'RENEW'
        WHEN 'L' THEN 'NEW'
        WHEN 'V' THEN 'VOID'
        WHEN 'W' THEN 'WITHDRAW'
        WHEN 'X' THEN 'REDEEM'
        WHEN 'S' THEN 'SEGRE'
        ELSE 'N/A'
    END AS STATUS, P.PULLOUT , USR.USERNAME as APPRAISER
FROM TBLPAWN P
INNER JOIN TBLCLIENT C 
	ON C.CLIENTID = P.CLIENTID
LEFT JOIN TBLCLASS CLASS
	ON CLASS.CLASSID = P.CATID
LEFT JOIN tbl_Gamit USR
    ON USR.USERID = P.APPRAISERID
=======================================================
CREATE VIEW MONEY_TRANSFER(
  SERVICETYPE,
  TRANSDATE,
  MONEYTRANS,
  REFNUM,
  PAYOUT,
  SENDOUT,
  SERVICECHARGE,
  COMMISSION,
  NETAMOUNT)
AS
SELECT 
	ServiceType, TransDate,
    CASE MoneyTrans 
      WHEN 0 THEN 'PAYOUT'
      WHEN 1 THEN 'SENDOUT'
      ELSE 'NA'
    END AS MoneyTrans,
    CASE
      WHEN ServiceType = 'Pera Padala' AND MoneyTrans = 0
      THEN 'ME# ' || LPAD(TransID,5,0)
	  WHEN ServiceType = 'Pera Padala' AND MoneyTrans = 1
      THEN 'MR# ' || LPAD(TransID,5,0)
      ELSE RefNum END as RefNum,
    CASE MoneyTrans
      WHEN 0 THEN NETAMOUNT 
      ELSE 0 END AS PAYOUT,
    CASE MoneyTrans
      WHEN 1 THEN NETAMOUNT 
      ELSE 0 END AS SENDOUT,
    ServiceCharge,
    Commission,
    NETAMOUNT
FROM
	TBLMONEYTRANSFER
WHERE
	Status = 'A';